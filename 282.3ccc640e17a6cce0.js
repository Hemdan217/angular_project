"use strict";(self.webpackChunksotre=self.webpackChunksotre||[]).push([[282],{3282:(F,c,a)=>{a.r(c),a.d(c,{UserModule:()=>O});var l=a(6895),o=a(433),_=a(5226),m=a.n(_),e=a(1571),g=a(1261),p=a(529);let d=(()=>{class t{constructor(n){this.httpclient=n}register(n){return this.httpclient.post(`${g.N.baseAPIURL}/users`,JSON.stringify(n),{headers:{"Content-Type":"Application/json"}})}getUser(n){return this.httpclient.get(`${g.N.baseAPIURL}/users?email=${n}`)}login(n,r){return this.httpclient.get(`${g.N.baseAPIURL}/users?email=${n}`)}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(p.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var v=a(6064),u=a(6217);function Z(t,s){1&t&&(e.TgZ(0,"span"),e._uU(1,"Please enter, This is required"),e.qZA())}function T(t,s){1&t&&(e.TgZ(0,"span"),e._uU(1,"Please Enter, Valid Minimum Length"),e.qZA())}function x(t,s){1&t&&(e.TgZ(0,"span"),e._uU(1,"Please Enter, Valid Email "),e.qZA())}const C=function(t){return{"is-invalid":t}};function L(t,s){if(1&t&&(e.ynx(0),e.TgZ(1,"label",10),e._uU(2),e.qZA(),e._UZ(3,"input",11),e.TgZ(4,"span",12),e.YNc(5,Z,2,0,"span",13),e.YNc(6,T,2,0,"span",13),e.YNc(7,x,2,0,"span",13),e.qZA(),e.TgZ(8,"div",14),e._uU(9," Looks good! "),e.qZA(),e.BQk()),2&t){const n=s.$implicit,r=e.oxw();let i;e.xp6(1),e.s9C("for",n.name),e.xp6(1),e.hij("Your ",n.name,""),e.xp6(1),e.s9C("type",n.type),e.s9C("id",n.name),e.s9C("formControlName",n.name),e.Q6J("ngClass",e.VKq(9,C,((null==(i=r.userLogin.get(n.name))?null:i.touched)||(null==(i=r.userLogin.get(n.name))?null:i.dirty))&&(null==(i=r.userLogin.get(n.name))?null:i.invalid))),e.xp6(2),e.Q6J("ngIf",null==r.userLogin.controls[n.name]||null==r.userLogin.controls[n.name].errors?null:r.userLogin.controls[n.name].errors.required),e.xp6(1),e.Q6J("ngIf",null==r.userLogin.controls[n.name]||null==r.userLogin.controls[n.name].errors?null:r.userLogin.controls[n.name].errors.minlength),e.xp6(1),e.Q6J("ngIf",null==r.userLogin.controls[n.name]||null==r.userLogin.controls[n.name].errors?null:r.userLogin.controls[n.name].errors.email)}}let U=(()=>{class t{constructor(n,r,i,S){this.fb=n,this.userService=r,this.userAuth=i,this.router=S,this.userLogin=this.fb.group({email:["",[o.kI.required,o.kI.email]],password:["",[o.kI.required,o.kI.minLength(6)]]}),this.s=m().mixin({toast:!0,position:"top-right",showConfirmButton:!1,timer:1e3,timerProgressBar:!0})}login(){const{email:n,password:r}=this.userLogin.value;this.userService.login(n,r).subscribe(i=>{i[0]?.email==n&&i[0]?.password==r?(this.s.fire({title:"Login Done",icon:"success"}),this.userAuth.userLoggedIn(n,r),this.router.navigate(["/products"])):this.s.fire({title:"Invalid email or password, please try again or register",icon:"error"})})}ngOnInit(){this.schema=[{name:"email",type:"email"},{name:"password",type:"password"}]}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(o.qu),e.Y36(d),e.Y36(v.e),e.Y36(u.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:13,vars:3,consts:[[1,"container"],[1,"row"],[1,"col-md-6","text-center"],["src","./assets/14.png","alt","","srcset","",2,"width","70%"],[1,"col-md-6"],[1,"row","g-3","p-5","m-2",3,"formGroup","ngSubmit"],[4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"p-5","m-2"],["routerLink","/user/register",1,"m-2","text-primary","text-decoration-none"],[1,"form-label",3,"for"],["required","",1,"form-control",3,"type","id","formControlName","ngClass"],[1,"invalid-feedback"],[4,"ngIf"],[1,"valid-feedback"]],template:function(n,r){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4)(5,"form",5),e.NdJ("ngSubmit",function(){return r.login()}),e.YNc(6,L,10,11,"ng-container",6),e.TgZ(7,"button",7),e._uU(8,"Login"),e.qZA()(),e.TgZ(9,"span",8),e._uU(10,"Haven't you account"),e.TgZ(11,"a",9),e._uU(12,"Sign Up"),e.qZA()()()()()),2&n&&(e.xp6(5),e.Q6J("formGroup",r.userLogin),e.xp6(1),e.Q6J("ngForOf",r.schema),e.xp6(1),e.Q6J("disabled",!r.userLogin.valid))},dependencies:[l.mk,l.sg,l.O5,u.rH,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u]}),t})();function y(t,s){1&t&&(e.TgZ(0,"span"),e._uU(1,"Please enter, This is required"),e.qZA())}function A(t,s){1&t&&(e.TgZ(0,"span"),e._uU(1,"Please Enter, Valid Minimum Length"),e.qZA())}function R(t,s){1&t&&(e.TgZ(0,"span"),e._uU(1,"Please Enter, Valid Email "),e.qZA())}function b(t,s){1&t&&(e.TgZ(0,"span"),e._uU(1," | Please Make Sure To Match "),e.qZA())}function I(t,s){if(1&t&&(e.ynx(0),e.YNc(1,b,2,0,"span",13),e.BQk()),2&t){const n=e.oxw().$implicit,r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.userRegister.controls[n.name].value!==r.userRegister.controls.password.value)}}const q=function(t){return{"is-invalid":t}};function w(t,s){if(1&t&&(e.ynx(0),e.TgZ(1,"div",9)(2,"label",10),e._uU(3),e.qZA(),e._UZ(4,"input",11),e.TgZ(5,"span",12),e.YNc(6,y,2,0,"span",13),e.YNc(7,A,2,0,"span",13),e.YNc(8,R,2,0,"span",13),e.YNc(9,I,2,1,"ng-container",13),e.qZA(),e.TgZ(10,"div",14),e._uU(11," Looks good! "),e.qZA()(),e.BQk()),2&t){const n=s.$implicit,r=e.oxw();let i;e.xp6(2),e.s9C("for",n.name),e.xp6(1),e.hij("Your ",n.name,""),e.xp6(1),e.s9C("type",n.type),e.s9C("id",n.name),e.s9C("formControlName",n.name),e.Q6J("ngClass",e.VKq(10,q,((null==(i=r.userRegister.get(n.name))?null:i.touched)||(null==(i=r.userRegister.get(n.name))?null:i.dirty))&&(null==(i=r.userRegister.get(n.name))?null:i.invalid)||"confirmPassword"==n.name&&r.userRegister.controls.confirmPassword.value!==r.userRegister.controls.password.value)),e.xp6(2),e.Q6J("ngIf",null==r.userRegister.controls[n.name]||null==r.userRegister.controls[n.name].errors?null:r.userRegister.controls[n.name].errors.required),e.xp6(1),e.Q6J("ngIf",null==r.userRegister.controls[n.name]||null==r.userRegister.controls[n.name].errors?null:r.userRegister.controls[n.name].errors.minlength),e.xp6(1),e.Q6J("ngIf",null==r.userRegister.controls[n.name]||null==r.userRegister.controls[n.name].errors?null:r.userRegister.controls[n.name].errors.email),e.xp6(1),e.Q6J("ngIf","confirmPassword"==n.name)}}let J=(()=>{class t{constructor(n,r,i){this.fb=n,this.userService=r,this.router=i,this.userRegister=this.fb.group({fullName:["",[o.kI.required,o.kI.minLength(5)]],email:["",[o.kI.required,o.kI.email]],password:["",[o.kI.required,o.kI.minLength(6)]],confirmPassword:["",[o.kI.required,o.kI.minLength(6)]]}),this.s=m().mixin({toast:!0,position:"top-right",showConfirmButton:!1,timer:1e3,timerProgressBar:!0})}register(){delete this.userRegister.value.confirmPassword,this.userService.getUser(this.userRegister.value.email).subscribe(n=>{n[0]?.email==this.userRegister.value.email?this.s.fire({title:"User registration Failed, This Email already exists",icon:"error"}):this.userService.register(this.userRegister.value).subscribe(r=>{this.s.fire({title:"User Registration Done",icon:"success"}),this.router.navigate(["/user/login"])})})}ngOnInit(){this.schema=[{name:"fullName",type:"text"},{name:"email",type:"email"},{name:"password",type:"password"},{name:"confirmPassword",type:"password"}]}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(o.qu),e.Y36(d),e.Y36(u.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],decls:14,vars:3,consts:[[1,"container"],[1,"row","mt-5"],[1,"col-6"],["src","./assets/15.jpg","alt","",2,"max-width","100%"],[1,"row","g-3",3,"formGroup","ngSubmit"],[4,"ngFor","ngForOf"],[1,"col-12"],["type","submit",1,"btn","btn-primary","mb-2",3,"disabled"],["routerLink","/user/login",1,"m-2","text-primary","text-decoration-none"],[1,"col-md-12"],[1,"form-label",3,"for"],["required","",1,"form-control",3,"type","id","formControlName","ngClass"],[1,"invalid-feedback"],[4,"ngIf"],[1,"valid-feedback"]],template:function(n,r){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",2)(5,"form",4),e.NdJ("ngSubmit",function(){return r.register()}),e.YNc(6,w,12,12,"ng-container",5),e.TgZ(7,"div",6)(8,"button",7),e._uU(9,"Sign Up"),e.qZA()()(),e.TgZ(10,"span"),e._uU(11,"Have Account"),e.TgZ(12,"a",8),e._uU(13,"Login"),e.qZA()()()()()),2&n&&(e.xp6(5),e.Q6J("formGroup",r.userRegister),e.xp6(1),e.Q6J("ngForOf",r.schema),e.xp6(2),e.Q6J("disabled",!r.userRegister.valid||r.userRegister.controls.confirmPassword.value!==r.userRegister.controls.password.value))},dependencies:[l.mk,l.sg,l.O5,u.rH,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u]}),t})();var N=a(9963);function Y(t,s){if(1&t&&(e.ynx(0),e.TgZ(1,"tr")(2,"th",8),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA()(),e.BQk()),2&t){const n=s.$implicit;e.xp6(3),e.Oqu(n.id),e.xp6(2),e.Oqu(n.total),e.xp6(2),e.Oqu(n.status)}}function P(t,s){if(1&t&&(e.ynx(0),e.TgZ(1,"div",4)(2,"table",5)(3,"thead")(4,"tr")(5,"th",6),e._uU(6,"#"),e.qZA(),e.TgZ(7,"th",6),e._uU(8,"Total"),e.qZA(),e.TgZ(9,"th",6),e._uU(10,"Statue"),e.qZA()()(),e.TgZ(11,"tbody"),e.YNc(12,Y,8,3,"ng-container",7),e.qZA()()(),e.BQk()),2&t){const n=e.oxw();e.xp6(12),e.Q6J("ngForOf",n.myOrders)}}function k(t,s){1&t&&(e.TgZ(0,"div",9)(1,"h1"),e._uU(2,"You Did Not Make Any Orders"),e.qZA(),e.TgZ(3,"button",10)(4,"a",11),e._uU(5,"Go To Shopping"),e.qZA()()())}let f=(()=>{class t{constructor(n){this.order=n,this.myOrders=[]}ngOnInit(){this.order.getOrders(localStorage.getItem("email")).subscribe(n=>{this.myOrders=n})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(N.p))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-profile"]],decls:5,vars:2,consts:[[1,"container"],[1,"container",2,"min-height","50vh"],[4,"ngIf","ngIfElse"],["noData",""],[1,"list-group"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[1,"text-center","mt-5"],[1,"btn","btn-outline-dark"],["routerLink","/products",1,"nav-link","btn"]],template:function(n,r){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,P,13,1,"ng-container",2),e.qZA()(),e.YNc(3,k,6,0,"ng-template",null,3,e.W1O)),2&n){const i=e.MAs(4);e.xp6(2),e.Q6J("ngIf",r.myOrders.length)("ngIfElse",i)}},dependencies:[l.sg,l.O5,u.rH]}),t})();var h=a(6363);const Q=[{path:"login",component:U,title:"Log In"},{path:"register",component:J,title:"Sign Up"},{path:"profile",component:f,title:"profile",canActivate:[h.W]},{path:"",component:f,title:"profile",canActivate:[h.W]}];let O=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.ez,u.Bz.forChild(Q),p.JF,o.UX]}),t})()}}]);